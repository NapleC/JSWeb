<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!--for iOS-->
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta name="format-detection" content="email=no">
    <!--for iOS End-->
    <!--Flexible-->
    <script src="libs/flexible.js"></script>
    <link type="text/css" rel="stylesheet/less" href="css/global.less">
    <link type="text/css" rel="stylesheet/less" href="css/index.less">
    <script src="libs/less.min.js"></script>
    <script src="libs/jquery-3.3.1.js"></script>
    <!--MUI -->
    <script src="js/mui.js"></script>
    <link href="css/mui.css" rel="stylesheet"/>
    <title>首页</title>
</head>
<body>
<header class="mui-bar mui-bar-nav">
    <h1 class="mui-title">标题</h1>
</header>
<nav class="mui-bar mui-bar-tab">
    <a class="mui-tab-item mui-active" href="#tabbar">
        <span class="mui-icon mui-icon-home"></span>
        <span class="mui-tab-label">首页</span>
    </a>
    <a class="mui-tab-item" href="#tabbar-with-chat">
        <span class="mui-icon mui-icon-email"><span class="mui-badge">9</span></span>
        <span class="mui-tab-label">消息</span>
    </a>
    <a class="mui-tab-item" href="#tabbar-with-contact">
        <span class="mui-icon mui-icon-contact"></span>
        <span class="mui-tab-label">通讯录</span>
    </a>
    <a class="mui-tab-item" href="#tabbar-with-mine">
        <span class="mui-icon mui-icon-gear"></span>
        <span class="mui-tab-label">设置</span>
    </a>
</nav>
<div class="mui-content">
    <div id="tabbar" class="mui-control-content mui-active">

        <!--首页轮播-->
        <div id="banner" class="mui-slider">
            <div class="mui-slider-group mui-slider-loop">
                <div class="mui-slider-item mui-slider-item-duplicate">
                    <a href="#">
                        <img src="http://pic1.win4000.com/wallpaper/3/56f508b24ef18.jpg">
                    </a>
                </div>
                <!-- 第一张 -->
                <div class="mui-slider-item">
                    <a href="#">
                        <img src="http://pic1.win4000.com/wallpaper/3/56f508af0c640.jpg">
                    </a>
                </div>
                <!-- 第二张 -->
                <div class="mui-slider-item">
                    <a href="#">
                        <img src="http://pic1.win4000.com/wallpaper/3/56f508b0d1d65.jpg">
                    </a>
                </div>
                <!-- 第三张 -->
                <div class="mui-slider-item">
                    <a href="#">
                        <img src="http://pic1.win4000.com/wallpaper/3/56f508b24ef18.jpg">
                    </a>
                </div>
                <!-- 额外增加的一个节点(循环轮播：最后一个节点是第一张轮播) -->
                <div class="mui-slider-item mui-slider-item-duplicate">
                    <a href="#">
                        <img src="http://pic1.win4000.com/wallpaper/3/56f508af0c640.jpg">
                    </a>
                </div>
            </div>
            <div class="mui-slider-indicator">
                <div class="mui-indicator mui-active"></div>
                <div class="mui-indicator"></div>
                <div class="mui-indicator"></div>
            </div>

        </div>
        <div class="title">这是div模式选项卡中的第1个子页面.</div>
        <div class="title">何谓div模式的选项卡？
            其实就是通过DIV模拟一个独立页面，通过DIV的显示、隐藏模拟不同页面的切换，典型的SPA模式；
        </div>
        <div class="title">
            这种模式适合简单业务系统，因为每个选项卡内容要写在一个DIV中，
            若逻辑复杂，会导致当前页面DOM结构繁杂，造成webview响应缓慢，甚至崩溃；
            因此若系统较复杂，需要下拉刷新等操作，推荐使用webview模式的选项卡；
        </div>
    </div>
    <div id="tabbar-with-chat" class="mui-control-content">
        <div class="title">这是div模式选项卡中的第2个子页面，该页面展示一个消息列表</div>

        <!--<ul class="mui-table-view mui-table-view-chevron">-->
        <!--<li class="mui-table-view-cell"><a href="" class="mui-navigate-right">Item Other</a></li>-->
        <!--</ul>-->

        <!--聊天列表-->
        <div id="chatItemWrapper" class="mui-slider pay-order-group-padding">
            <!--<div class="mui-slider-group">-->
            <div id="chatListItem">
                <ul class="mui-table-view mui-table-view-chevron">
                </ul>
            </div>
            <!--</div>-->
        </div>

    </div>
    <div id="tabbar-with-contact" class="mui-control-content">
        <div class="title">这是div模式选项卡中的第3个子页面，该页面展示一个通讯录示例.</div>

        <div id="communicationItemWrapper" class="mui-slider pay-order-group-padding">
            <div id="communicationListItem">
                <ul class="mui-table-view mui-table-view-striped mui-table-view-condensed">
                </ul>
            </div>
        </div>
    </div>
    <div id="tabbar-with-mine" class="mui-control-content">
        <div class="title">这是div模式选项卡中的第4个子页面，该页面展示一个常见的设置示例.</div>
        <ul class="mui-table-view">
            <li class="mui-table-view-cell">
                <a class="mui-navigate-right">
                    新消息通知
                </a>
            </li>
            <li class="mui-table-view-cell">
                <a class="mui-navigate-right">
                    隐私
                </a>
            </li>
            <li class="mui-table-view-cell">
                <a class="mui-navigate-right">
                    通用
                </a>
            </li>
        </ul>
        <ul class="mui-table-view" style="margin-top: 25px;">
            <li class="mui-table-view-cell">
                <a class="mui-navigate-right">
                    关于mui
                </a>
            </li>
        </ul>
        <ul class="mui-table-view" style="margin-top: 25px;">
            <li class="mui-table-view-cell">
                <a style="text-align: center;color: #FF3B30;">
                    退出登录
                </a>
            </li>
        </ul>
    </div>
</div>
<!-- 模板 begin -->
<script type="text/template" id="tmpChat">

    <li class="mui-table-view-cell"><a href="email.html" class="mui-navigate-right">Item 1</a></li>

</script>


<script type="text/template" id="tmpCommunication">

    <li class="mui-table-view-cell">
        <div class="mui-slider-cell">
            <div class="oa-contact-cell mui-table">
                <div class="mui-table-cell oa-contact-avatar">
                    <img src="https://www.qq745.com/uploads/allimg/meinv/01/1942/sf2jklmqlb1.jpg"/>
                </div>
                <div class="oa-contact-content mui-table-cell">
                    <div class="mui-clearfix">
                        <h4 class="oa-contact-name">叶文洁</h4>
                        <span class="oa-contact-position mui-h6">董事长</span>
                    </div>
                    <p class="oa-contact-email mui-h6">
                        yewenjie@sina.com
                    </p>
                </div>
            </div>
        </div>
    </li>

</script>
<!-- 模板 eng-->
<script>

    mui.init();
    //轮播切换
    //获得slider插件对象
    var gallery = mui(".mui-slider");
    gallery.slider({
        interval:2000//自动轮播周期，若为0则不自动播放，默认为0；
    });
    var millList = ["张三发来一条信息", "里斯发来一张图片", "王五发来一个红包",
        "刘谦给你发来一个语音聊天请求", "琪琪发来一个视频请求", "你发了一张图片", "你谁啊"];
    var $tmpChat = $("#tmpChat"),
        $privateMills = $("#chatListItem > ul");
    $privateMills.empty();
    millList.forEach(function (mill) {
        var $privateChat = $($tmpChat.html())
            .find(".mui-navigate-right").text(mill).end()
            .data("machine", mill)
            .appendTo($privateMills);
    });


    var communicationList = [
        {
            "image": "http://t2.hddhhn.com/uploads/tu/201705/9999/6d773bb3e7.jpg",
            "name": "叶文洁",
            "description": "董事长",
            "email": "yewnejie@xxx.com"
        },
        {
            "image": "http://t2.hddhhn.com/uploads/tu/201705/9999/6d773bb3e7.jpg",
            "name": "张三",
            "description": "总经理",
            "email": "ssaa@xxx.com"
        },
        {
            "image": "http://t2.hddhhn.com/uploads/tu/201705/9999/6d773bb3e7.jpg",
            "name": "里斯",
            "description": "员工",
            "email": "lisi@xxx.com"
        },
        {
            "image": "http://t2.hddhhn.com/uploads/tu/201705/9999/6d773bb3e7.jpg",
            "name": "王五",
            "description": "员工",
            "email": "wangwu@xxx.com"
        },
        {
            "image": "http://t2.hddhhn.com/uploads/tu/201705/9999/6d773bb3e7.jpg",
            "name": "刘烨",
            "description": "员工",
            "email": "liuye@xxx.com"
        },
        {
            "image": "http://t2.hddhhn.com/uploads/tu/201705/9999/6d773bb3e7.jpg",
            "name": "祁文强",
            "description": "员工",
            "email": "qiwenqiang@xxx.com"
        }
    ];
    var tmpCommunication = $("#tmpCommunication"),
        $privateCommunication = $("#communicationListItem > ul");
    $privateCommunication.empty();
    communicationList.forEach(function (mill) {
        var $privateMachine = $(tmpCommunication.html())
            .find(".oa-contact-avatar> img").attr("src", mill.image).end()
            .find(".oa-contact-name").text(mill.name).end()
            .find(".oa-contact-position").text(mill.description || "").end()
            .find(".oa-contact-email").text("EMAIL: " + mill.email).end()
            .appendTo($privateCommunication);
    });
</script>
</body>
</html>
